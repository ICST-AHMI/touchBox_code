#N canvas 427 227 968 452 10;
#X floatatom 45 20 5 0 0 0 - - -;
#X obj 8 71 moses \$1;
#X obj 8 19 inlet;
#X obj 90 428 outlet;
#X obj 102 19 inlet;
#X obj 430 17 inlet;
#X floatatom 145 398 5 0 0 0 - - -;
#X obj -139 19 loadbang;
#X floatatom 63 72 5 0 0 0 - - -;
#X text 427 0 receive bang from heel;
#X obj -139 72 hradio 15 1 0 4 empty empty 0__1__2__3 0 25 0 10 -262144
-1 -1 1;
#X obj 227 277 once;
#X floatatom 258 278 5 0 0 0 - - -;
#X obj 248 256 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 154 306 once;
#X floatatom 185 307 5 0 0 0 - - -;
#X obj 248 159 switch 3;
#X floatatom 304 159 5 0 0 0 - - -;
#X text 267 218 (re)enable [once];
#X obj 205 139 r switch;
#X obj 270 235 r switch;
#X obj -165 108 s switch;
#X obj 90 397 switch 3;
#X obj 38 377 r switch;
#X text -168 125 choose the detection algorithm;
#X text 100 2 Upper threshold;
#X obj 317 19 inlet;
#X obj 199 19 inlet;
#X text 197 2 Lower threshold;
#X floatatom 209 74 5 0 0 0 - - -;
#X obj 154 73 moses \$2;
#X text 74 322 autoreset the previous [once] when downcrossing lower
threshold;
#X obj -139 44 f \$3;
#X obj -12 282 _uponly_smooth \$4;
#X text 301 2 Smoothing (samples);
#X text 409 68 INLETS: \; 1- Force signal (10 bits resolution: 0-1023)
\; 2- Upper threshold for force detection \; 3- Smoothing in samples
(only applies to algorithm 1) \; 4- Receive a BANG from the heel (only
applies to algorithm 3) \; OUTLET: 1- Force value \; \; CREATION PARAMETERS:
\; 1- Default upper threshold \; 2- Default lower threshold \; 3- Detection
ALGORITHM: 1 = a continuous increasing (smoothed) stream of force data
is sent to output. If the force data stream is not increasing \, then
0 is sent \, 2 = If the input downcrosses the lower threshold \, and
then upcrosses the upper threshold \, this is sent to output \, 3 =
If a BANG has been received from the heel \, each time the input upcrosses
the threshold \, this sent to output \; 4- Default smoothing in samples
(only applies to algorithm 1) \; \; N.B. for the algorithm 3 to work
correctly \, the BANG from the heel MUST arrive before the threshold
has been exceeded. Otherwise \, the current value read from the toe
is sent to output.;
#X floatatom 112 41 5 0 0 0 - - -;
#X floatatom 210 42 5 0 0 0 - - -;
#X floatatom 326 40 5 0 0 0 - - -;
#X connect 1 1 8 0;
#X connect 1 1 11 0;
#X connect 1 1 33 0;
#X connect 2 0 0 0;
#X connect 2 0 1 0;
#X connect 2 0 30 0;
#X connect 4 0 1 1;
#X connect 4 0 36 0;
#X connect 5 0 16 3;
#X connect 7 0 32 0;
#X connect 10 0 21 0;
#X connect 11 0 12 0;
#X connect 11 0 14 1;
#X connect 11 0 22 2;
#X connect 11 0 22 3;
#X connect 13 0 11 1;
#X connect 14 0 15 0;
#X connect 14 0 16 2;
#X connect 16 0 17 0;
#X connect 16 0 13 0;
#X connect 19 0 16 0;
#X connect 20 0 13 0;
#X connect 22 0 6 0;
#X connect 22 0 3 0;
#X connect 23 0 22 0;
#X connect 26 0 33 1;
#X connect 26 0 38 0;
#X connect 27 0 30 1;
#X connect 27 0 37 0;
#X connect 30 0 14 0;
#X connect 30 1 29 0;
#X connect 32 0 10 0;
#X connect 33 0 22 1;
